<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>{{ profile.name }}</title>

    <style>
        /* ---------- THEME VARIABLES ---------- */
        :root {
            --bg-main: #000;
            --bg-card: #0f0f0f;
            --bg-menu: #0e0e0e;
            --text-main: #eaeaea;
            --text-muted: #aaa;
            --border-main: #222;
            --accent: #1e90ff;
            --accent-event: #ff4757;
        }

        body[data-theme="light"] {
            --bg-main: #f3f4f6;
            --bg-card: #ffffff;
            --bg-menu: #ffffff;
            --text-main: #111;
            --text-muted: #555;
            --border-main: #ddd;
            --accent: #0057ff;
        }

        * { box-sizing: border-box; }

        body {
            margin: 0;
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
            background:
                radial-gradient(800px at 80% -10%, rgba(255,255,255,0.04), transparent 40%),
                radial-gradient(600px at 10% 20%, rgba(30,144,255,0.15), transparent 45%),
                var(--bg-main);
            color: var(--text-main);
            transition: background 0.3s, color 0.3s;
        }

        .container {
            max-width: 900px;
            min-height: 100vh;
            margin: 0 auto;
            padding: 40px 16px;
        }

        /* ---------- HERO ---------- */
        .hero {
            padding: 80px 0 60px;
            animation: fadeUp 0.8s ease forwards;
        }

        .hero h1 {
            font-size: 44px;
            max-width: 720px;
            margin: 0;
        }

        .hero p {
            margin-top: 14px;
            font-size: 18px;
            color: var(--text-muted);
        }

        @keyframes fadeUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* ---------- TOGGLES ---------- */
        .hamburger, .theme-toggle {
            position: fixed;
            top: 16px;
            font-size: 20px;
            cursor: pointer;
            z-index: 1000;
            padding: 6px 10px;
            border-radius: 8px;
            background: var(--bg-card);
            border: 1px solid var(--border-main);
        }

        .hamburger { right: 20px; }
        .theme-toggle { right: 70px; }

        /* ---------- MENU ---------- */
        .menu {
            position: fixed;
            top: 0;
            right: -100%;
            width: 300px;
            height: 100%;
            background: var(--bg-menu);
            padding: 20px;
            transition: 0.3s;
            z-index: 999;
        }

        .menu.show { right: 0; }

        .menu input, .menu textarea {
            width: 100%;
            margin-bottom: 10px;
            background: var(--bg-main);
            border: 1px solid var(--border-main);
            color: var(--text-main);
            padding: 8px;
            border-radius: 6px;
        }

        .menu button {
            width: 100%;
            padding: 10px;
            background: var(--accent);
            border: none;
            color: #fff;
            border-radius: 6px;
            cursor: pointer;
        }

        /* ---------- PROFILE ---------- */
        .profile {
            display: flex;
            align-items: center;
            gap: 24px;
            padding-bottom: 40px;
            border-bottom: 1px solid var(--border-main);
            margin-bottom: 40px;
        }

        .profile img {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid var(--border-main);
        }

        .role, .bio {
            color: var(--text-muted);
        }

        .socials {
            margin-top: 10px;
            display: flex;
            gap: 14px;
        }

        .socials a {
            font-size: 14px;
            color: var(--accent);
            text-decoration: none;
        }

        .socials a:hover {
            text-decoration: underline;
        }

        /* ---------- SKILLS ---------- */
        .skills {
            margin-bottom: 50px;
        }

        .skill-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 14px;
        }

        .skill-card {
            padding: 14px;
            background: var(--bg-card);
            border: 1px solid var(--border-main);
            border-radius: 12px;
        }

        .dots {
            display: flex;
            gap: 4px;
            margin-top: 6px;
        }

        .dots span {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--border-main);
        }

        .dots span.on {
            background: var(--accent);
        }

        /* ---------- FILTERS ---------- */
        .filters {
            display: flex;
            gap: 10px;
            margin-bottom: 25px;
        }

        .filters button {
            background: var(--bg-card);
            border: 1px solid var(--border-main);
            color: var(--text-main);
            padding: 8px 14px;
            border-radius: 8px;
            cursor: pointer;
        }

        /* ---------- POST ---------- */
        .post {
            position: relative;
            background: var(--bg-card);
            border: 1px solid var(--border-main);
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 32px;
            transition: transform 0.25s ease, box-shadow 0.25s ease;
        }

        .post:hover {
            transform: translateY(-6px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.45);
        }

        .badge {
            position: absolute;
            top: 12px;
            left: 12px;
            padding: 4px 10px;
            font-size: 11px;
            border-radius: 6px;
            font-weight: 600;
            color: #fff;
        }

        .badge.project { background: var(--accent); }
        .badge.event { background: var(--accent-event); }

        .post img, .post video {
            width: 100%;
            max-height: 420px;
            object-fit: contain;
            border-radius: 12px;
            background: #000;
            margin-bottom: 12px;
        }

        footer {
            text-align: center;
            font-size: 13px;
            color: var(--text-muted);
            padding: 40px 0 10px;
        }

        .visits {
            margin-top: 6px;
            font-size: 12px;
            color: var(--text-muted);
        }

        @media (max-width: 600px) {
            .profile {
                flex-direction: column;
                text-align: center;
            }
            .hero h1 {
                font-size: 32px;
            }
            .socials {
                justify-content: center;
            }
        }
    </style>
</head>

<body>

<div class="theme-toggle" onclick="toggleTheme()">||</div>
<div class="hamburger" onclick="toggleMenu()">â˜°</div>

<div class="menu" id="menu">
    <h3>Contact</h3>
    <form method="post">
        {% csrf_token %}
        <input name="name" placeholder="Name" required>
        <input name="email" placeholder="Email" required>
        <input name="phone" placeholder="Phone">
        <textarea name="message" placeholder="Message"></textarea>
        <button type="submit">Send</button>
    </form>
</div>

<div class="container">

    <!-- HERO -->
    <section class="hero">
        <h1>{{ profile.hero_title }}</h1>
        <p>{{ profile.hero_subtitle }}</p>
    </section>

    <!-- PROFILE -->
    <div class="profile">
        {% if profile.profile_image %}
            <img src="{{ profile.profile_image.url }}">
        {% endif %}
        <div>
            <h2>{{ profile.name }}</h2>
            <div class="role">{{ profile.role }}</div>
            <div class="bio">{{ profile.bio }}</div>

            <div class="socials">
                {% if profile.github %}<a href="{{ profile.github }}" target="_blank">GitHub</a>{% endif %}
                {% if profile.linkedin %}<a href="{{ profile.linkedin }}" target="_blank">LinkedIn</a>{% endif %}
                {% if profile.instagram %}<a href="{{ profile.instagram }}" target="_blank">Instagram</a>{% endif %}
            </div>
        </div>
    </div>

    <!-- SKILLS -->
    {% if skills %}
    <section class="skills">
        <h2>Skills</h2>
        <div class="skill-grid">
            {% for skill in skills %}
            <div class="skill-card">
                {{ skill.name }}
                <div class="dots">
                    {% for i in "12345" %}
                        <span class="{% if forloop.counter <= skill.level %}on{% endif %}"></span>
                    {% endfor %}
                </div>
            </div>
            {% endfor %}
        </div>
    </section>
    {% endif %}

    <!-- FILTERS -->
    <div class="filters">
        <button onclick="filterPosts('all')">ALL</button>
        <button onclick="filterPosts('project')">PROJECTS</button>
        <button onclick="filterPosts('event')">EVENTS</button>
    </div>

    <!-- FEED -->
    {% for post in posts %}
    <div class="post" data-type="{{ post.post_type }}">
        <div class="badge {{ post.post_type }}">{{ post.post_type|upper }}</div>

        {% if post.image %}
            <img src="{{ post.image.url }}">
        {% endif %}
        {% if post.video %}
            <video controls><source src="{{ post.video.url }}"></video>
        {% endif %}

        <div>{{ post.caption }}</div>
    </div>
    {% endfor %}

    <footer>
        Built & engineered by <strong>{{ profile.name }}</strong>
        <div class="visits"> {{ visits }} : )</div>
    </footer>

</div>

<script>
    function toggleMenu() {
        document.getElementById("menu").classList.toggle("show");
    }

    function filterPosts(type) {
        document.querySelectorAll(".post").forEach(p => {
            p.style.display =
                (type === "all" || p.dataset.type === type) ? "block" : "none";
        });
    }

    function toggleTheme() {
        const body = document.body;
        const toggle = document.querySelector(".theme-toggle");

        if (body.getAttribute("data-theme") === "light") {
            body.removeAttribute("data-theme");
            localStorage.setItem("theme", "dark");
            toggle.innerText = "||";
        } else {
            body.setAttribute("data-theme", "light");
            localStorage.setItem("theme", "light");
            toggle.innerText = "O";
        }
    }

    if (localStorage.getItem("theme") === "light") {
        document.body.setAttribute("data-theme", "light");
        document.querySelector(".theme-toggle").innerText = "O";
    }
</script>

</body>
</html>
